-cleanups (check-patch, read the code and fix whatever stands out)
-Remove DEBUG, all XXX marked parts
-Submit upstream with:
 Signed-off-by: Julian Squires <julian@cipht.net>
